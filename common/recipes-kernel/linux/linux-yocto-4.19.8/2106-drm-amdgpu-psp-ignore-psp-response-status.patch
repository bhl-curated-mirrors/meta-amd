From ce0180b98b74806386b193ec233a14e1ae40bd17 Mon Sep 17 00:00:00 2001
From: Aaron Liu <aaron.liu@amd.com>
Date: Mon, 14 Jan 2019 16:08:32 +0800
Subject: [PATCH 2106/2940] drm/amdgpu/psp: ignore psp response status
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

In some cases, psp response status is not 0 even there is no
problem while the command is submitted. Some version of PSP FW
doesn't write 0 to that field.
So here we would like to only print a warning instead of an error
during psp initialization to avoid breaking hw_init and it doesn't
return -EINVAL.

Signed-off-by: Aaron Liu <aaron.liu@amd.com>
Reviewed-by: Huang Rui <ray.huang@amd.com>
Reviewed-by: Xiangliang Yu<Xiangliang.Yu@amd.com>
Acked-by: Christian KÃ¶nig <christian.koenig@amd.com>
Reviewed-by: Feifei Xu <Feifei.Xu@amd.com>
Reviewed-by: Paul Menzel <pmenzel+amd-gfx@molgen.mpg.de>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Chaudhary Amit Kumar <Chaudharyamit.Kumar@amd.com>
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c
index 2bf1b6908b7f..46592b978b3a 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c
@@ -153,9 +153,9 @@ psp_cmd_submit_buf(struct psp_context *psp,
         /* the status field must be 0 after psp command completion */
 	if (psp->cmd_buf_mem->resp.status || !timeout) {
                 if (ucode)
-                        DRM_ERROR("failed to load ucode id (%d) ",
+                        DRM_WARN("failed to load ucode id (%d) ",
                                   ucode->ucode_id);
-                DRM_ERROR("psp command failed and response status is (%d)\n",
+                DRM_WARN("psp command failed and response status is (%d)\n",
                           psp->cmd_buf_mem->resp.status);
 		if (!timeout)
                 	return -EINVAL;
-- 
2.17.1


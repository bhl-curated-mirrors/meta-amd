From 826a32f92a4a57a54ca4da530e18e88524535c0b Mon Sep 17 00:00:00 2001
From: Yong Zhao <yong.zhao@amd.com>
Date: Tue, 4 Oct 2016 13:26:40 -0400
Subject: [PATCH 1528/4131] drm/amd: Delete unused kfd2kgd interface functions

Change-Id: I9ee9130e7de93418345463a8ac546875b895fd56
Signed-off-by: Yong Zhao <yong.zhao@amd.com>
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.h        |  5 -----
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c |  3 ---
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c |  3 ---
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c  | 15 ---------------
 drivers/gpu/drm/amd/include/kgd_kfd_interface.h   |  3 ---
 5 files changed, 29 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.h b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.h
index ed753fc..02b432e 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.h
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.h
@@ -190,11 +190,6 @@ int amdgpu_amdkfd_gpuvm_mmap_bo(
 int amdgpu_amdkfd_gpuvm_map_gtt_bo_to_kernel(struct kgd_dev *kgd,
 		struct kgd_mem *mem, void **kptr);
 
-struct kfd_process_device *amdgpu_amdkfd_gpuvm_get_pdd_from_buffer_object(
-		struct kgd_dev *kgd, struct kgd_mem *mem);
-int amdgpu_amdkfd_gpuvm_return_bo_size(
-		struct kgd_dev *kgd, struct kgd_mem *mem);
-
 int amdgpu_amdkfd_gpuvm_pin_get_sg_table(struct kgd_dev *kgd,
 		struct kgd_mem *mem, uint64_t offset,
 		uint64_t size, struct sg_table **ret_sg);
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c
index be8bbda..62270ca 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c
@@ -217,9 +217,6 @@ static const struct kfd2kgd_calls kfd2kgd = {
 	.mmap_bo = amdgpu_amdkfd_gpuvm_mmap_bo,
 	.map_gtt_bo_to_kernel = amdgpu_amdkfd_gpuvm_map_gtt_bo_to_kernel,
 	.set_vm_context_page_table_base = set_vm_context_page_table_base,
-	.get_pdd_from_buffer_object =
-			amdgpu_amdkfd_gpuvm_get_pdd_from_buffer_object,
-	.return_bo_size = amdgpu_amdkfd_gpuvm_return_bo_size,
 	.pin_get_sg_table_bo = amdgpu_amdkfd_gpuvm_pin_get_sg_table,
 	.unpin_put_sg_table_bo = amdgpu_amdkfd_gpuvm_unpin_put_sg_table,
 	.get_dmabuf_info = amdgpu_amdkfd_get_dmabuf_info,
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c
index 2c34213..4db9637 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c
@@ -198,9 +198,6 @@ static const struct kfd2kgd_calls kfd2kgd = {
 	.mmap_bo = amdgpu_amdkfd_gpuvm_mmap_bo,
 	.map_gtt_bo_to_kernel = amdgpu_amdkfd_gpuvm_map_gtt_bo_to_kernel,
 	.set_vm_context_page_table_base = set_vm_context_page_table_base,
-	.get_pdd_from_buffer_object =
-			amdgpu_amdkfd_gpuvm_get_pdd_from_buffer_object,
-	.return_bo_size = amdgpu_amdkfd_gpuvm_return_bo_size,
 	.pin_get_sg_table_bo = amdgpu_amdkfd_gpuvm_pin_get_sg_table,
 	.unpin_put_sg_table_bo = amdgpu_amdkfd_gpuvm_unpin_put_sg_table,
 	.get_dmabuf_info = amdgpu_amdkfd_get_dmabuf_info,
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c
index bcaebed..3410779 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c
@@ -60,12 +60,6 @@ static inline struct amdgpu_device *get_amdgpu_device(struct kgd_dev *kgd)
 	return (struct amdgpu_device *)kgd;
 }
 
-struct kfd_process_device *amdgpu_amdkfd_gpuvm_get_pdd_from_buffer_object(
-		struct kgd_dev *kgd, struct kgd_mem *mem)
-{
-	return mem->data2.bo->pdd;
-}
-
 static bool check_if_add_bo_to_vm(struct amdgpu_vm *avm,
 		struct kgd_mem *mem)
 {
@@ -1035,16 +1029,7 @@ int amdgpu_amdkfd_gpuvm_free_memory_of_gpu(
 
 	return 0;
 }
-int amdgpu_amdkfd_gpuvm_return_bo_size(struct kgd_dev *kgd, struct kgd_mem *mem)
-{
-	struct amdgpu_bo *bo;
 
-	BUG_ON(mem == NULL);
-
-	bo = mem->data2.bo;
-	return bo->tbo.mem.size;
-
-}
 int amdgpu_amdkfd_gpuvm_map_memory_to_gpu(
 		struct kgd_dev *kgd, struct kgd_mem *mem, void *vm)
 {
diff --git a/drivers/gpu/drm/amd/include/kgd_kfd_interface.h b/drivers/gpu/drm/amd/include/kgd_kfd_interface.h
index fefbe9d..7af3073 100644
--- a/drivers/gpu/drm/amd/include/kgd_kfd_interface.h
+++ b/drivers/gpu/drm/amd/include/kgd_kfd_interface.h
@@ -341,9 +341,6 @@ struct kfd2kgd_calls {
 			struct kgd_mem *mem, void **kptr);
 	void (*set_vm_context_page_table_base)(struct kgd_dev *kgd, uint32_t vmid,
 			uint32_t page_table_base);
-	struct kfd_process_device* (*get_pdd_from_buffer_object)
-		(struct kgd_dev *kgd, struct kgd_mem *mem);
-	int (*return_bo_size)(struct kgd_dev *kgd, struct kgd_mem *mem);
 
 	int (*pin_get_sg_table_bo)(struct kgd_dev *kgd,
 			struct kgd_mem *mem, uint64_t offset,
-- 
2.7.4

